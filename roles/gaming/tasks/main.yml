---
- name: gaming | install negativo repos
  yum_repository:
      name: fedora-multimedia
      description: negativo17 - Multimedia 
      baseurl: https://negativo17.org/repos/multimedia/fedora-$releasever/$basearch/
      gpgcheck: no
      enabled: yes
  notify: update all

- name: gaming | install negativo steam repos
  yum_repository:
      name: fedora-steam
      description: negativo17 - steam 
      baseurl: https://negativo17.org/repos/steam/fedora-$releasever/$basearch/
      gpgcheck: no
      enabled: yes
  notify: update all

- name: gaming | Install gaming packages
  dnf:
      state: latest
      name: "{{ item }}"
  with_items:
  - supertuxkart
  - 0ad
  - wesnoth
  - steam

    ## - name: gaming | add copr lsi
    ##   command: /usr/bin/dnf copr enable -y alunux/linux-steam-integration
    ## 
    ## - name: gaming | install lsi
    ##   dnf:
    ##       state: latest
    ##       name: linux-steam-integration
    ## TODO - Find out why this doesnt work

- name: gaming | Install generic gaming drivers
  dnf:
      state: latest
      name: "{{ item }}"
  with_items:
  - mesa-vdpau-drivers.x86_64
  - mesa-vdpau-drivers.i686
  - vulkan.x86_64
  - vulkan.i686
  - dkms-xpad.noarch
  - mesa-vulkan-drivers
  - vlc
  - yarock
  notify:
    - add xpad module


- name: gaming | Install NVidia if that variable is set
  dnf:
      state: latest
      name: "{{ item }}"
  with_items:
  - dkms-nvidia-384.59-1
  - nvidia-driver-384.59-6
  - nvidia-driver-libs-384.59-6.i686
  - nvidia-driver-libs-384.59-6.x86_64
  - nvidia-settings-384.59-6
  - nvidia-libXNVCtrl-384.59-6
  - nvidia-settings-384.59-1
  - nvidia-modprobe-384.59-1
  - nvidia-xconfig--384.59-1
  - libglvnd
  - libglvnd-egl
  - libglvnd-gles
  - libglvnd-glx
  - libglvnd-opengl
  - libglvnd-core-devel
  - libglvnd-devel
  - libvdpau
  when: nvidia == true
  notify: block nouveau

- name: gaming | Install Radeon tools if that variable is set
  dnf:
      state: latest
      name: "{{ item }}"
  with_items:
  - radeontop
  - radeontool
  - libtxc_dxtn.i686
  - libtxc_dxtn.x86_64
  when: amd == true



  #- name: gaming | Install snaps
  # TODO

  #- name: gaming | Install flatpaks
  # TODO

  #- name: gaming | set up downloaded games from itch.io
